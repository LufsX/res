const e=self,t=new URL(e.location.href).searchParams,r=t.get("t"),n=t.get("404");Promise.any||(Promise.any=e=>Promise.all([...e].map(e=>new Promise((t,r)=>{Promise.resolve(e).then(r,t)}))).then(e=>Promise.reject(e),e=>Promise.resolve(e))),e.addEventListener("install",t=>{t.waitUntil(e.skipWaiting())}),e.addEventListener("fetch",t=>{let a=new URL(t.request.url);if("GET"!==t.request.method||a.origin!==e.origin)return;let i=new Event("abortFetch"),o=new EventTarget,s=e=>{let t="function"==typeof AbortController&&new AbortController,r=!1;t&&o.addEventListener(i.type,()=>{r||t.abort()});let n=e(t?t.signal:void 0);return async function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let s=await n(...t);if(s)return r=!0,o.dispatchEvent(i),s}},l=s(e=>async()=>{let r=await fetch(t.request,{signal:e});return r}),c=s(e=>async()=>{let t=r+a.pathname.slice(1)+a.search,i={redirect:"follow",signal:e},o=await fetch(t,i);if(404===o.status&&n&&(o=await fetch(r+n,i)),!o.ok)throw null;return o});t.respondWith(Promise.any([l(),c()]))});
